<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>考核填报系统</title>
</head>
<body>
	<div class="container">
		<form action="" method="post">
			<table class="table table-bordered">
				<thead>
					<tr class="text-center active">
						<td><b>序号</b></td>
						<td><b>姓名</b></td>
						<td><b>德（10分）</b></td>
						<td><b>能（10分）</b></td>
						<td><b>勤（20分）</b></td>
						<td><b>绩（50分）</b></td>
						<td><b>廉（10分）</b></td>
						<td><b>总分</b></td>
					</tr>
				</thead>
				<tbody>
					<tr th:each="employee,iterStat:${employees}">
						<td>
							<label th:text="${iterStat.count}"></label>
							<input type="hidden" th:value="${employee.id}" th:name="${'evaluationEmployee['+iterStat.index+'].toWhom'}">
						</td>
						<td>
							<label th:text="${employee.name}"></label>					
						</td>						
						<td><input class="form-control" type="number" th:name="${'evaluationEmployee['+iterStat.index+'].morality'}"></td>
						<td><input class="form-control" type="number" th:name="${'evaluationEmployee['+iterStat.index+'].ability'}"></td>
						<td><input class="form-control" type="number" th:name="${'evaluationEmployee['+iterStat.index+'].diligence'}"></td>
						<td><input class="form-control" type="number" th:name="${'evaluationEmployee['+iterStat.index+'].achievement'}"></td>
						<td><input class="form-control" type="number" th:name="${'evaluationEmployee['+iterStat.index+'].honest'}"></td>
						<td><input class="form-control" type="number" th:name="${'evaluationEmployee['+iterStat.index+'].sum'}" readonly="readonly"></td>
					</tr>
					<tr>
						<td colspan="2"><b>备注</b></td>
						<td>政治品德3分<br>职业道德3分<br>社会公德2分<br>家庭美德2分
						</td>
						<td>业务执行能力3分<br>学习与研究能力2分<br>知识运用与表达能力3分<br>沟通协作能力2分
						</td>
						<td>工作积极性7分<br>工作责任心7分<br>出勤情况6分
						</td>
						<td>履职成效15分<br>目标任务完成情况20分<br>工作效率15分
						</td>
						<td>廉洁自律10分</td>
						<td>说明：单项成绩之和</td>
					</tr>
				</tbody>
			</table>
			<button type="reset" class="btn btn-primary">重置</button>
			<button type="submit" class="btn btn-primary pull-right">提交</button>
			<br>
		</form>
	</div>
<script type="text/javascript">
$(document).ready(function() {
	//用户名修改事件
	$(":input").change(function() {
		
		debugger;
		
		var name = $(this).attr("name");//获取当前变化的控件name
		var endIndex=name.indexOf("]");
		var preName=name.substring(0,endIndex+1);
		
		var morality=preName+'.morality';
		var ability=preName+'.ability';
		var diligence=preName+'.diligence';
		var achievement=preName+'.achievement';
		var honest=preName+'.honest';
		
		var sum=preName+'.sum';
		
		var strMorality=$(":input[name='"+morality+"']".val());
		var strAbility=$(":input[name='"+ability+"']").val();
		var strDiligence=$(":input[name='"+diligence+"']").val();
		var strAchievement=$(":input[name='"+achievement+"']").val();
		var strHonest=$(":input[name='"+honest+"']").val();
		
		var numMorality=Number(strMorality);
		var numAbility=Number(strAbility);
		var numDiligence=Number(strDiligence);
		var numAchievement=Number(strAchievement);
		var numHonest=Number(strHonest);
		
		$(":input[name='"+sum+"']").val(numMorality+numAbility+numDiligence+numAchievement+numHonest);
	});
});

</script>
</body>
</html>