<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title th:text="#{msg.register}">注册</title>
<meta charset="utf-8">
</head>

<body>
	<div class="container">

		<form action="/register" method="post">
			<h2 th:text="#{msg.register.title}">Please Register</h2>
			<input id="account" name="account" type="text"
				placeholder="UserName/Tel./Email" class="form-control"> <br>
			<input id="password" name="password" type="password"
				class="form-control" placeholder="Password">
			<div class="checkbox">
				<label> <input type="checkbox"
					th:text="#{msg.register.protocol}">
				</label>
			</div>
			<button id="btn-reset" class="btn btn-large btn-primary"
				type="submit" th:text="#{msg.reset}">Reset</button>
			<button id="btn-submit" class="btn btn-large btn-primary pull-right"
				type="submit" th:text="#{msg.register}">Register</button>
		</form>

	</div>

	<!-- Ajax 注册的用户名是否可用 -->
	<script type="text/javascript">
		$(function() {
			$(":input[name=account]").change(function() {
				var val = $(this).val(); //获取输入值
				val = $.trim(val); //去掉两端的空格
				var $this = $(this); //
				debugger
				if (val != "") { //值不为空
					//把当前节点后面的所有 font 兄弟节点删除
					$this.nextAll("font").remove();
	
					var url = "/user-validateAccount";
					var args = {
						"account" : val,
						"time" : new Date()
					};
					$.post(url, args, function(data) {
						//表示可用
						if (data == "1") {
							$this.after("<font color='green'>账户可用!</font>");
						}
						//不可用
						else if (data == "0") {
							$this.after("<font color='red'>账户不可用!</font>");
						}
						//服务器错误
						else {
							alert("服务器错误!");
						}
					});
				} else {
					alert("账户不能为空");
					$(this).val("");
					$this.focus();
				}
			});
		})
	</script>
	<script type="text/javascript">
		$(document).ready(function() {
			$("#btn-submit").click(function() {
				debugger
				var account = $("#account").val();
				var password = $("#password").val();
				if (account == null || account == "") {
					alert("Account should not be empty");
					$("#account").focus();
					return false;
				} else if (password == null || password == "") {
					alert("Password should not be empty");
					$("#password").focus();
					return false;
				}
			});
		});
	</script>
</body>
</html>
